    
// ***************************************

    
// Probability of enemy moving
    if (cursors.left.isDown)
    {
        //  Move to the left
        evilplayer.body.velocity.x = 150;
            
        evilplayer.animations.play('right');
    }
    else if (cursors.right.isDown)
    {
        //  Move to the right
        evilplayer.body.velocity.x = -150;

        evilplayer.animations.play('left');
    }
    else
    {
        //  Stand still
        evilplayer.animations.stop();

        evilplayer.frame = 4;
    }
    
    //  Allow the player to jump if they are touching the ground.
    if (cursors.up.isDown && evilplayer.body.touching.down)
    {
        evilplayer.body.velocity.y = -350;
    }

}
  
function killPlayer () {
    
    player.kill();
    evilplayer.kill();
    
    platforms.forEach(function(platform) {
        platform.body.immovable = false;
    });
    
    timer = 0;
    
    setTimeout(function() { game.add.sprite(0, 0, "GameOver"); }, 3000);
    setTimeout(function() { location.reload(); }, 6000);
        
}

function exitDoor (player, door) {
    
    // Removes the star from the screen
    player.kill();
    
    timer = 0;
    
    winText = game.add.text(360, 300, 'You Win!', { fontSize: '32px', fill: '#00b5ff'});
    setTimeout(function() { location.reload(); }, 3000);

}
    
function collectStar (player, star) {
    
    // Removes the star from the screen
    star.kill();

    //  Add and update the score
    score += 10;
    scoreText.text = 'Score: ' + score;
    
    timer += 10;

}
	
function collectButter (player, butter) {
    
    // Removes the butter from the screen
    butter.kill();

    //  Add and update the score
    score += 1;
    scoreText.text = 'Score: ' + score;

}
	
function collectMilk (player, milk) {
    
    // Removes the milk from the screen
    milk.kill();

    //  Add and update the score
    score += 2;
    scoreText.text = 'Score: ' + score;

}

function collectDia (player, dia) {
    
    // Removes the diamond from the screen
    dia.kill();

    player.body.gravity.y = -300;
    
    doors.forEach(function(door) {
        door.body.position.x = 730;
        door.body.position.y = 330;
    });

}

function render() {
	
    game.debug.soundInfo(music, 20, 32);

}

function startTimer() {
    timer = 45;
    interval = setInterval(function(){
    if (timer >= 0) {
        timerText.text = timer.toString();
    }
    else {
        killPlayer();
        clearInterval(timer);
    }
    timer--;
    }, 1000);
}

startTimer();

</script>
	
</body>
	
</html>
